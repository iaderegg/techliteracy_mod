$('#div_modal').on('click',function(){setModalMaxHeight($('#modal_suggestions'))}),$('#send_suggestion_btn').on('click',function(){var b=$('#suggestions_form').serializeArray(),c=validate_form(b);'error'==c.status?new PNotify({title:c.title,text:c.content,addclass:'custom',icon:'',nonblock:{nonblock:!0}}):($.ajax({type:'POST',data:{data:b},url:'wp-admin/admin-ajax.php?action=td_save_suggestion',success:function success(d){10==d&&new PNotify({title:'',text:'Muchas gracias por tu comentario.',addclass:'custom',icon:'',nonblock:{nonblock:!0}})},dataType:'text',cache:'false',error:function error(d){console.log(d)}}),$('.modal-backdrop').hide(),$('#suggestions_modal').hide())});function setModalMaxHeight(a){this.$element=$(a),this.$content=this.$element.find('.modal-content');var b=this.$content.outerHeight()-this.$content.innerHeight(),c=768>$(window).width()?20:60,d=$(window).height()-(c+b),e=this.$element.find('.modal-header').outerHeight()||0,f=this.$element.find('.modal-footer').outerHeight()||0;this.$content.css({overflow:'hidden'}),this.$element.find('.modal-body').css({'max-height':d-(e+f),'overflow-y':'auto'})}$('.modal').on('show.bs.modal',function(){$(this).show(),setModalMaxHeight(this)}),$(window).resize(function(){0!=$('.modal.in').length&&setModalMaxHeight($('.modal.in'))});function validate_form(a){return result={},''==a[2].value&&''==a[3].value?(result.title='Advertencia',result.content='No has escrito tu comentario o sugerencia.',result.status='error',result):''==a[0].value?(result.title='Advertencia',result.content='Recuerda escribir tu nombre.',result.status='error',result):''==a[1].value?(result.title='Advertencia',result.content='Recuerda escribir tu email.',result.status='error',result):0==has_letters(a[0].value)?is_email(a[1].value)?(result.title='Advertencia',result.content='El campo email debe tener el formato de un correo electr\xF3nico (example@miexample.com).',result.status='error',result):(result.status='success',result):(result.title='Advertencia',result.content='El campo nombre solo debe contener letras.',result.status='error',result)}function has_letters(a){for(a=a.toString().toLowerCase(),i=0;i<a.length;i++)if(-1=='abcdefghyjklmn\xF1opqrstuvwxyz'.indexOf(a.charAt(i),0))return 1;return 0}function has_numbers(a){for(i=0;i<a.length;i++)if(-1!='0123456789'.indexOf(a.charAt(i),0))return 1;return 0}function is_email(a){var b=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return b.test(a)?0:1}